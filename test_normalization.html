<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Test Address Normalization</title>
  <style>
    body { font-family: monospace; padding: 20px; }
    .test { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
    .match { background: #d4edda; }
    .no-match { background: #f8d7da; }
  </style>
</head>
<body>
  <h1>üß™ Test Address Normalization</h1>
  
  <div id="results"></div>

  <script>
    // –ö–æ–ø–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ (–£–õ–£–ß–®–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø)
    function normalizeAddress(text) {
      if (!text) return '';
      return text
        .toLowerCase()
        .replace(/—Å–∞–Ω–∫—Ç-–ø–µ—Ç–µ—Ä–±—É—Ä–≥|—Å–ø–±|—Å-–ø–±/gi, '') // –£–±–∏—Ä–∞–µ–º –≥–æ—Ä–æ–¥
        .replace(/–±–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä|–±—Ü/gi, '') // –£–±–∏—Ä–∞–µ–º –ë–¶
        .replace(/–∫–æ–≤–æ—Ä–∫–∏–Ω–≥/gi, '') // –£–±–∏—Ä–∞–µ–º –∫–æ–≤–æ—Ä–∫–∏–Ω–≥
        .replace(/—É–ª–∏—Ü–∞|—É–ª\./gi, '—É–ª') // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º —É–ª–∏—Ü–∞
        .replace(/–ø—Ä–æ—Å–ø–µ–∫—Ç|–ø—Ä-–∫—Ç|–ø—Ä\./gi, '–ø—Ä') // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –ø—Ä–æ—Å–ø–µ–∫—Ç
        .replace(/–¥–æ–º|–¥\./gi, '') // –£–±–∏—Ä–∞–µ–º "–¥–æ–º"
        .replace(/–∫–æ—Ä–ø—É—Å|–∫\./gi, '–∫') // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∫–æ—Ä–ø—É—Å
        .replace(/—Å—Ç—Ä–æ–µ–Ω–∏–µ|—Å—Ç—Ä\./gi, '—Å—Ç—Ä') // –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º —Å—Ç—Ä–æ–µ–Ω–∏–µ
        .replace(/[.,\s"¬´¬ª]+/g, '') // –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã, —Ç–æ—á–∫–∏, –∑–∞–ø—è—Ç—ã–µ, –∫–∞–≤—ã—á–∫–∏
        .replace(/-/g, ''); // –£–±–∏—Ä–∞–µ–º –¥–µ—Ñ–∏—Å—ã
    }

    // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    const tests = [
      {
        input: "–°–ü–±, —É–ª.–°–∞–≤—É—à–∫–∏–Ω–∞, –¥–æ–º 126–ê, –ë–¶ \"–ê—Ç–ª–∞–Ω—Ç–∏–∫-—Å–∏—Ç–∏\"",
        address: "–°–∞–≤—É—à–∫–∏–Ω–∞ 126",
        expectedCode: "–¢—É—Ä–≥–µ–Ω–µ–≤"
      },
      {
        input: "–∫–æ–≤–æ—Ä–∫–∏–Ω–≥ Collective, —É–ª. –ì–æ—Ä–æ—Ö–æ–≤–∞—è 49–ë, 4 —ç—Ç–∞–∂",
        address: "–ì–æ—Ä–æ—Ö–æ–≤–∞—è 49",
        expectedCode: "–î—É—Ä–æ–≤"
      },
      {
        input: "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥, –ø—Ä-–∫—Ç –õ—É–Ω–∞—á–∞—Ä—Å–∫–æ–≥–æ, –¥. 108–∫3",
        address: "–¢–æ–ª—Å—Ç–æ–≥–æ 1/3",
        expectedCode: "–¢–µ—Ä–µ—â–µ–Ω–∫–æ"
      }
    ];

    // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã
    const resultsDiv = document.getElementById('results');
    
    tests.forEach((test, idx) => {
      const normalizedInput = normalizeAddress(test.input);
      const normalizedAddress = normalizeAddress(test.address);
      
      const matches = normalizedInput.includes(normalizedAddress);
      
      const testDiv = document.createElement('div');
      testDiv.className = `test ${matches ? 'match' : 'no-match'}`;
      testDiv.innerHTML = `
        <strong>Test ${idx + 1}:</strong> ${matches ? '‚úÖ MATCH' : '‚ùå NO MATCH'}<br>
        <strong>Input:</strong> "${test.input}"<br>
        <strong>Normalized Input:</strong> "${normalizedInput}"<br>
        <strong>Address:</strong> "${test.address}"<br>
        <strong>Normalized Address:</strong> "${normalizedAddress}"<br>
        <strong>Expected Code:</strong> ${test.expectedCode}<br>
        <strong>Contains:</strong> ${normalizedInput.includes(normalizedAddress)}
      `;
      resultsDiv.appendChild(testDiv);
    });
  </script>
</body>
</html>
