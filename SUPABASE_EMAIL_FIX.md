# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º email

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å—Å—ã–ª–∫–∞ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email –≤–µ–¥—ë—Ç –Ω–∞ `http://localhost:3000`, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É:
```
access_denied&error_code=otp_expired&error_description=Email+link+is+invalid+or+has+expired
```

## –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard** ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Authentication ‚Üí Settings**
3. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **Email Auth**
4. **–û—Ç–∫–ª—é—á–∏—Ç–µ** –æ–ø—Ü–∏—é **"Enable email confirmations"**
5. –ù–∞–∂–º–∏—Ç–µ **Save**

–¢–µ–ø–µ—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–º–æ–≥—É—Ç –≤—Ö–æ–¥–∏—Ç—å —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redirect URL –¥–ª—è Chrome Extension (–°–ª–æ–∂–Ω–µ–µ)

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL:

1. **–ü–æ–ª—É—á–∏—Ç–µ ID —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ `chrome://extensions/`
   - –ù–∞–π–¥–∏—Ç–µ "Jira Personal Notes"
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID (–Ω–∞–ø—Ä–∏–º–µ—Ä: `abcdefghijklmnopqrstuvwxyz123456`)

2. **–î–æ–±–∞–≤—å—Ç–µ Redirect URL –≤ Supabase**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard** ‚Üí **Authentication ‚Üí URL Configuration**
   - –í –ø–æ–ª–µ **Redirect URLs** –¥–æ–±–∞–≤—å—Ç–µ:
     ```
     chrome-extension://–í–ê–®_ID_–†–ê–°–®–ò–†–ï–ù–ò–Ø/auth.html
     ```
   - –ù–∞–∂–º–∏—Ç–µ **Save**

3. **–û–±–Ω–æ–≤–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Site URL**:
   - –í –ø–æ–ª–µ **Site URL** —É–∫–∞–∂–∏—Ç–µ:
     ```
     chrome-extension://–í–ê–®_ID_–†–ê–°–®–ò–†–ï–ù–ò–Ø
     ```

4. **–ò–∑–º–µ–Ω–∏—Ç–µ –∫–æ–¥ –≤ `auth.js`**:

```javascript
// –í —Ñ–∞–π–ª–µ auth.js, –≤ —Ñ—É–Ω–∫—Ü–∏–∏ initSupabase, –∏–∑–º–µ–Ω–∏—Ç–µ:

supabaseClient = supabase.createClient(config.supabaseUrl, config.supabaseKey, {
  auth: {
    autoRefreshToken: true,
    persistSession: true,
    detectSessionInUrl: true,
    flowType: 'pkce' // –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É
  }
});
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Magic Link –≤–º–µ—Å—Ç–æ password (–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

1. –í Supabase Dashboard ‚Üí **Authentication ‚Üí Providers**
2. –í–∫–ª—é—á–∏—Ç–µ **Email (Magic Link)**
3. –û—Ç–∫–ª—é—á–∏—Ç–µ **Email (OTP)**

–ó–∞—Ç–µ–º –∏–∑–º–µ–Ω–∏—Ç–µ –∫–æ–¥ –≤—Ö–æ–¥–∞:

```javascript
// –í–º–µ—Å—Ç–æ signInWithPassword –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
const { error } = await supabase.auth.signInWithOtp({
  email: email,
  options: {
    emailRedirectTo: `chrome-extension://${chrome.runtime.id}/auth.html`
  }
});
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è –≤–∞—à–µ–≥–æ —Å–ª—É—á–∞—è

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 1** - –æ—Ç–∫–ª—é—á–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email:

**–ü–æ—á–µ–º—É:**
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (1 –∫–ª–∏–∫)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É
- ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–æ–π –∫–æ–º–∞–Ω–¥—ã (3-4 —á–µ–ª–æ–≤–µ–∫–∞)
- ‚úÖ Email –≤—Å—ë —Ä–∞–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Ö–æ–¥–∞
- ‚ö†Ô∏è –ù–µ—Ç –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ email (–Ω–æ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

**–ö–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å:**

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://supabase.com ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç
2. –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é: **Authentication** (üîê)
3. –í–∫–ª–∞–¥–∫–∞: **Providers**
4. –ù–∞–π–¥–∏—Ç–µ **Email** ‚Üí –Ω–∞–∂–º–∏—Ç–µ **Edit**
5. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –≤–Ω–∏–∑ ‚Üí –Ω–∞–π–¥–∏—Ç–µ **"Confirm email"**
6. **–û—Ç–∫–ª—é—á–∏—Ç–µ** –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å
7. –ù–∞–∂–º–∏—Ç–µ **Save**

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç email + –ø–∞—Ä–æ–ª—å
- –ù–∞–∂–∏–º–∞–µ—Ç "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
- ‚úÖ **–°—Ä–∞–∑—É –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏** (–±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email)

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –í—Ö–æ–¥ –±–µ–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –µ—â—ë –ø—Ä–æ—â–µ, –º–æ–∂–µ—Ç–µ:

1. **–ü–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** —Å–æ–∑–¥–∞—ë—Ç –∞–∫–∫–∞—É–Ω—Ç —á–µ—Ä–µ–∑ Supabase Dashboard:
   - Authentication ‚Üí Users ‚Üí **Add user**
   - –í–≤–æ–¥–∏—Ç email –∏ –ø–∞—Ä–æ–ª—å
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∫–æ–ª–ª–µ–≥–∞–º

2. **–í—Å–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω –æ–±—â–∏–π –∞–∫–∫–∞—É–Ω—Ç**:
   - –í—Å–µ –≤—Ö–æ–¥—è—Ç —Å –æ–¥–Ω–∏–º email/–ø–∞—Ä–æ–ª–µ–º
   - –í—Å–µ –≤–∏–¥—è—Ç –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –∑–∞–º–µ—Ç–∫–∏
   - –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –º–∞–ª–µ–Ω—å–∫–æ–π –∫–æ–º–∞–Ω–¥—ã

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ 3-4 –∞–∫–∫–∞—É–Ω—Ç–∞ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ Dashboard –∏ —Ä–∞–∑–¥–∞–π—Ç–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email:

1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
2. –í—ã–±–µ—Ä–∏—Ç–µ "–ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º"
3. –í–≤–µ–¥–∏—Ç–µ email (–ª—é–±–æ–π) –∏ –ø–∞—Ä–æ–ª—å
4. –ù–∞–∂–º–∏—Ç–µ "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"
5. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: **"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!"**
6. –°—Ä–∞–∑—É –Ω–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏" —Å —Ç–µ–º–∏ –∂–µ –¥–∞–Ω–Ω—ã–º–∏
7. ‚úÖ –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: "–í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!"

–ì–æ—Ç–æ–≤–æ! üéâ
