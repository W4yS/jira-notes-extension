<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Jira Notes</title>
  <link rel="stylesheet" href="settings.css">
</head>
<body>

  <div class="container">
    <header class="page-header">
      <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
      <p class="subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–º —Ä–∞–±–æ—Ç—ã, —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∏ –¥–∞–Ω–Ω—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è Jira Notes.</p>
    </header>

    <div class="nav-tabs">
      <button class="nav-tab active" data-tab="sync">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</button>
      <button class="nav-tab" data-tab="statuses">–°—Ç–∞—Ç—É—Å—ã</button>
      <button class="nav-tab" data-tab="issuedata">–î–∞–Ω–Ω—ã–µ</button>
    </div>

    <!-- Tab: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è -->
    <div class="tab-content active" id="syncTab">
      <div class="box">
        <div class="box-header">
          <h2>–†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã</h2>
        </div>
        <div class="box-body">
          <div class="form-checkbox">
            <input type="checkbox" id="officeDetectionToggle" checked>
            <label for="officeDetectionToggle">
              <div>–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ñ–∏—Å–æ–≤</div>
              <div class="note">–í–∫–ª—é—á–∞–µ—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–¥–æ–≤ –æ—Ñ–∏—Å–æ–≤ (–ì–æ–≥–æ–ª—å, –ü—É—à–∫–∏–Ω –∏ —Ç.–¥.) –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö Jira.</div>
            </label>
          </div>
        </div>
        <div class="box-footer" style="display: flex; gap: 16px;">
          <div class="mode-button" data-mode="personal">
            <input type="radio" name="syncMode" id="modePersonal" value="personal" checked>
            <label for="modePersonal">
              <strong>–õ–∏—á–Ω—ã–π —Ä–µ–∂–∏–º</strong>
              <div class="note">–í—Å–µ –∑–∞–º–µ—Ç–∫–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ.</div>
            </label>
          </div>
          <div class="mode-button" data-mode="team">
            <input type="radio" name="syncMode" id="modeTeam" value="team">
            <label for="modeTeam">
              <strong>–ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º</strong>
              <div class="note">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–º–µ—Ç–æ–∫ –∏ —Å—Ç–∞—Ç—É—Å–æ–≤ —Å –∫–æ–º–∞–Ω–¥–æ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.</div>
            </label>
          </div>
        </div>
      </div>

      <div id="syncSettings" style="display: none;">
        <div class="box">
          <div class="box-header">
            <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏</h3>
          </div>
          <div class="box-body">
            <div class="form-group">
              <label for="teamId">Team ID</label>
              <input type="text" id="teamId" class="form-control" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: support-team-01">
              <p class="note">–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã. –°–æ–≥–ª–∞—Å—É–π—Ç–µ –µ–≥–æ —Å–æ –≤—Å–µ–º–∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏.</p>
            </div>
            <div class="form-group">
              <label for="userEmail">–í–∞—à Email</label>
              <input type="email" id="userEmail" class="form-control" placeholder="your.name@company.com">
              <p class="note">–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–∞—à–µ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ –∫–æ–º–∞–Ω–¥–µ.</p>
            </div>
            <div class="form-group">
              <label for="userName">–í–∞—à–µ –∏–º—è</label>
              <input type="text" id="userName" class="form-control" placeholder="–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤">
              <p class="note">–ë—É–¥–µ—Ç –≤–∏–¥–Ω–æ –¥—Ä—É–≥–∏–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º –∫–æ–º–∞–Ω–¥—ã.</p>
            </div>
            <div class="form-group">
              <label>–í–∞—à —Ü–≤–µ—Ç</label>
              <div class="color-selector" id="colorSelector">
                <!-- Colors will be injected by JS -->
              </div>
              <p class="note">–≠—Ç–æ—Ç —Ü–≤–µ—Ç –±—É–¥–µ—Ç –ø–æ–º–µ—á–∞—Ç—å –≤–∞—à–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –¥—Ä—É–≥–∏—Ö.</p>
            </div>
          </div>
          <div class="box-footer" style="display: flex; justify-content: space-between; align-items: center;">
            <div>
              <button class="btn btn-primary" id="connectBtn">–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>
              <button class="btn btn-secondary" id="testBtn">–¢–µ—Å—Ç</button>
            </div>
            <div id="statusIndicator" class="status-indicator offline" style="display: none;">
              <span id="statusText">–û—Ç–∫–ª—é—á–µ–Ω–æ</span>
            </div>
          </div>
        </div>
        <div class="box" id="teamMembersBox" style="display: none;">
          <div class="box-header">
            <h3>–£—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥—ã</h3>
          </div>
          <div class="box-body" id="membersList">
            <!-- Team members will be injected by JS -->
          </div>
        </div>
      </div>
    </div>

    <!-- Tab: –°—Ç–∞—Ç—É—Å—ã -->
    <div class="tab-content" id="statusesTab">
      <div class="two-column-layout">
        <div class="box">
          <div class="box-header">
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏</h2>
          </div>
          <div class="box-body">
            <p class="note" style="margin-bottom: 16px;">–í—ã –º–æ–∂–µ—Ç–µ —É–¥–∞–ª—è—Ç—å –ª—é–±—ã–µ —Å—Ç–∞—Ç—É—Å—ã. –ö–Ω–æ–ø–∫–∞ "–°–±—Ä–æ—Å–∏—Ç—å" –≤–µ—Ä–Ω–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –Ω–∞–±–æ—Ä.</p>
            <div class="status-list" id="statusesList">
              <!-- Statuses will be injected by JS -->
            </div>
          </div>
          <div class="box-footer" style="display: flex; justify-content: flex-end; gap: 8px;">
             <button class="btn btn-secondary" id="resetDefaultsBtn">–°–±—Ä–æ—Å–∏—Ç—å –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º</button>
             <button class="btn btn-danger" id="deleteAllStatusesBtn">–£–¥–∞–ª–∏—Ç—å –≤—Å–µ</button>
          </div>
        </div>
        <div class="box">
          <div class="box-header">
            <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å</h3>
          </div>
          <div class="box-body">
            <div class="form-group">
              <label for="newStatusName">–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞</label>
              <input type="text" id="newStatusName" class="form-control" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä: –û–∂–∏–¥–∞–µ—Ç –æ—Ç–≤–µ—Ç–∞" maxlength="30">
            </div>
            <div class="form-group">
              <label for="newStatusEmoji">–≠–º–æ–¥–∑–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
              <input type="text" id="newStatusEmoji" class="form-control" placeholder="üîµ" maxlength="2" style="width: 60px;">
            </div>
            <div class="form-group">
              <label for="newStatusColor">–¶–≤–µ—Ç —Å—Ç–∞—Ç—É—Å–∞</label>
              <input type="color" id="newStatusColor" value="#3b82f6">
            </div>
            <div class="form-group">
              <label>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä</label>
              <div id="statusPreview" class="status-item-preview">
                <span id="previewEmoji" style="font-size: 16px;"></span>
                <div id="previewDot" class="status-dot"></div>
                <span id="previewName"></span>
              </div>
            </div>
          </div>
          <div class="box-footer" style="text-align: right;">
            <button class="btn btn-primary" id="addStatusBtn">–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Tab: –î–∞–Ω–Ω—ã–µ -->
    <div class="tab-content" id="issuedataTab">
       <div class="two-column-layout data-layout">
        <div class="box">
          <div class="box-header">
            <h2>–°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
          </div>
          <div class="box-body">
            <p class="note" style="margin-bottom: 16px;">–ó–¥–µ—Å—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∏–∑ –∫–∞—Ä—Ç–æ—á–µ–∫ Jira. –û–Ω–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ.</p>
            <div class="form-group">
              <label for="issueSelector">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</label>
              <select id="issueSelector" class="form-control">
                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç–æ—á–∫—É --</option>
              </select>
            </div>
          </div>
          <div class="box-footer" style="display: flex; justify-content: flex-end; gap: 8px;">
            <button class="btn btn-secondary" id="exportAllIssuesBtn">–≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö</button>
            <button class="btn btn-danger" id="deleteAllIssuesBtn">–£–¥–∞–ª–∏—Ç—å –≤—Å–µ</button>
          </div>
        </div>
        <div class="box" id="issueDataContainer" style="display: none;">
          <div class="box-header" style="display: flex; justify-content: space-between; align-items: center;">
            <h3 id="selectedIssueKey"></h3>
            <div>
              <button class="btn btn-secondary" id="exportIssueBtn">–≠–∫—Å–ø–æ—Ä—Ç JSON</button>
              <button class="btn btn-danger" id="deleteIssueBtn">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
          </div>
          <div class="box-body" id="issueFieldsGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 14px;">
            <!-- Fields will be injected by JS -->
          </div>
           <div class="box-footer">
              –î–∞—Ç–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è: <span id="extractedAt"></span>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script src="firebase-app-compat.js"></script>
  <script src="firebase-database-compat.js"></script>
  <script src="settings.js" type="module"></script>
</body>
</html>

